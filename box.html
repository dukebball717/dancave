<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Man Cave Live Scores</title>
<style>
  body {
    margin: 0;
    background: #000;
    color: #0f0;
    font-family: Arial, sans-serif;
    overflow: hidden;
  }
  h1 {
    font-size: 3em;
    margin: 20px 0;
    text-align: center;
  }
  .league-title {
    font-size: 2em;
    margin: 20px 0;
    text-align: center;
    color: #fff;
  }
  .scores-container {
    display: flex;
    flex-direction: column;
    align-items: center;
    justify-content: start;
    width: 100%;
  }
  .game {
    display: flex;
    align-items: center;
    justify-content: space-around;
    width: 90%;
    margin: 20px 0;
    font-size: 1.8em;
  }
  .team {
    display: flex;
    flex-direction: column;
    align-items: center;
    width: 200px;
  }
  .team img {
    max-width: 100px;
    height: auto;
    margin-bottom: 10px;
  }
  .score {
    font-size: 2em;
    font-weight: bold;
    width: 200px;
    text-align: center;
  }
</style>
</head>
<body>
<h1>Man Cave Live Scores</h1>
<div id="scores" class="scores-container">Loading...</div>

<script>
// ================= CONFIG =================
const API_KEY = '465991830f2ae7dc89008520ae572097';
const LEAGUES = [
  { code: 'american-football-nfl', title: 'NFL Football' },
  { code: 'baseball-mlb', title: 'MLB Baseball' },
  { code: 'american-football-ncaa', title: 'FBS College Football' }
];
let currentLeagueIndex = 0;
const REFRESH_MS = 60000; // refresh every 60 seconds

const scoresDiv = document.getElementById('scores');

// ================= API Call =================
async function fetchScores(league) {
  try {
    const url = `https://v1.api-sports.io/${league.code}/fixtures?live=all`;
    const res = await fetch(url, {
      headers: { 'x-apisports-key': API_KEY }
    });
    const data = await res.json();
    return data.response || [];
  } catch (err) {
    console.error(err);
    return null;
  }
}

// ================= RENDER =================
function renderEmpty(message = 'No live games right now.') {
  scoresDiv.innerHTML = `<div class="league-title">${LEAGUES[currentLeagueIndex].title}</div>
                         <p style="font-size:1.5em;color:#777;">${message}</p>`;
}

function renderScores(games) {
  scoresDiv.innerHTML = `<div class="league-title">${LEAGUES[currentLeagueIndex].title}</div>`;
  if (!games.length) {
    renderEmpty();
    return;
  }

  games.forEach(game => {
    const div = document.createElement('div');
    div.className = 'game';

    const homeTeam = document.createElement('div');
    homeTeam.className = 'team';
    homeTeam.innerHTML = `<img src="${game.teams.home.logo}" alt="Home Logo"><div>${game.teams.home.name}</div>`;

    const awayTeam = document.createElement('div');
    awayTeam.className = 'team';
    awayTeam.innerHTML = `<img src="${game.teams.away.logo}" alt="Away Logo"><div>${game.teams.away.name}</div>`;

    const score = document.createElement('div');
    score.className = 'score';
    const homeScore = game.goals?.home ?? 0;
    const awayScore = game.goals?.away ?? 0;
    score.textContent = `${homeScore} - ${awayScore}`;

    div.appendChild(homeTeam);
    div.appendChild(score);
    div.appendChild(awayTeam);
    scoresDiv.appendChild(div);
  });
}

// ================= ROTATION =================
async function updateScores() {
  const league = LEAGUES[currentLeagueIndex];
  const games = await fetchScores(league);
  if (games === null) {
    renderEmpty('Error fetching scores. Check API key or connection.');
  } else {
    renderScores(games);
  }

  // Move to next league
  currentLeagueIndex = (currentLeagueIndex + 1) % LEAGUES.length;
}

// ================= INITIAL & AUTO-REFRESH =================
updateScores();
setInterval(updateScores, REFRESH_MS);
</script>
</body>
</html>